<div class="tool">
  <div class="letters">
    <span class="body" [class.active]="body.checked">{{
      navigator.current?.node.combination[0]
    }}</span>
    <span class="mech" [class.active]="mech.checked">{{
      navigator.current?.node.combination[1]
    }}</span>
    <span class="logic" [class.active]="logic.checked">{{
      navigator.current?.node.combination[2]
    }}</span>
  </div>
  <div class="checkboxes">
    <mat-checkbox #body>body</mat-checkbox>
    <mat-checkbox #mech>mech</mat-checkbox>
    <mat-checkbox #logic>logic</mat-checkbox>
  </div>
  <div class="buttons">
    <button
      [disabled]="!navigator.currentChoices[0]"
      (click)="moveNode(navigator.currentChoices[0])"
      (window:keydown.`)="moveNode(navigator.currentChoices[0])"
      (window:keydown.0)="moveNode(navigator.currentChoices[0])"
      mat-raised-button
      color="accent">{{
      0
    }}</button>
    <button
      [disabled]="!navigator.currentChoices[1]"
      (click)="moveNode(navigator.currentChoices[1])"
      (window:keydown.1)="moveNode(navigator.currentChoices[1])"
      mat-raised-button
      color="accent">{{
      1
    }}</button>
    <button
      [disabled]="!navigator.currentChoices[2]"
      (click)="moveNode(navigator.currentChoices[2])"
      (window:keydown.2)="moveNode(navigator.currentChoices[2])"
      mat-raised-button
      color="accent">{{
      2
    }}</button>
    <button
      [disabled]="!navigator.currentChoices[3]"
      (click)="moveNode(navigator.currentChoices[3])"
      (window:keydown.3)="moveNode(navigator.currentChoices[3])"
      mat-raised-button
      color="warn">{{
      3
    }}</button>
  </div>
  @if (showInfo) {
    <div class="info">
      {{currentChartInfo}}
    </div>
  }
</div>
<div class="chart" #chart>
  <mat-form-field subscriptSizing="dynamic">
    <mat-label>Chart</mat-label>
    <mat-select (selectionChange)="navigator.moveChart($event.value)" [value]="navigator.current?.chart.id"
      (selectionChange)="showHideInfo()">
      @for (entry of navigator.availableCharts; track entry.id) {
        <mat-option [value]="entry.chart.id">
          {{entry.chart.title}}
        </mat-option>
      }
    </mat-select>
  </mat-form-field>
  @switch (navigator.current?.chart.name) {
    @case ('cbuchart') {
      <app-cbuchart></app-cbuchart>
    }
    @case ('cbuthraxisopt') {
      <app-cbuthraxisopt></app-cbuthraxisopt>
    }
    @case ('chart') {
      <app-chart></app-chart>
    }
    @case ('jnw') {
      <app-jnw></app-jnw>
    }
    @case ('twiddler_mim_code2') {
      <app-twiddler-mim-code2></app-twiddler-mim-code2>
    }
    @case ('tso0112') {
      <app-tso0112></app-tso0112>
    }
  }
</div>
